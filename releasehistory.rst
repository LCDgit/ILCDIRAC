----------------
Package ILCDIRAC
----------------

Version v1r16p17
----------------

BUGFIX
::::::

 Workflow
  - Again the tag name is wrong...

Version v1r16p16
----------------

BUGFIX
::::::

 Workflow
  - Fix logic bug in OverlayInput as it used to download as many files as there are signal events.

Version v1r16p15
----------------

BUGFIX
::::::

 Workflow
  - level of message warning does not exists, but warn does

Version v1r16p14
----------------

BUGFIX
::::::

 Core
  - USER_spectrum_mode was not set properly in whizard

Version v1r16p13
----------------

NEW
:::

 Interfaces
  - : Support for user spectrum in whizard.

CHANGE
::::::

 Core
  - Also look at the Number of bunch train to overlay before looking at the files.

Version v1r16p12
----------------

CHANGE
::::::

 Workflow
  - Disable CPU check while getting the overlay files as there is a risk it takes too much time

Version v1r16p11
----------------

CHANGE
::::::

 Workflo
  - Disable CPU check while getting the overlay files as there is a risk it takes too much time

Version v1r16p10
----------------

BUGFIX
::::::

 Workflow
  - tag number was wrong

Version v1r16p9
---------------

NEW
:::

 Core
  - dirac-ilc-add-software and add-whizard now create a replication request for new tar balls.
 Interfaces
  - Module to print out the Workflow parameters only
 Workflow
  - For next major dirac release, ParametricInputSandbox will be possible with Marlin

CHANGE
::::::

 Workflow
  - Now when getting the overlay fioles, wait for 3 minutes on average (gauss distributed, sigma=0.1)
  - Use common method between application modules (not for Mokka though) to report the final status

Version v1r16p8
---------------

NEW
:::

 Interfaces
  - Script to obtain the productions summaries

CHANGE
::::::

 Interfaces
  - Production API now get the directory metadata to pass to daughters
 Workflow
  - Catch message in whizard log to declare the job as successful

Version v1r16p7
---------------

CHANGE
::::::

 Core
  - Get the directorymetadata of the InputData files to get the number of events.

Version v1r16p6
---------------

CHANGE
::::::

 Core
  - Look for overlay files only if needed

Version v1r16p5
---------------

NEW
:::

 Core
  - Allow setting of event by event parameter ProcessID. Can be set by users' jobs and automatically resolved for production jobs

Version v1r16p4
---------------

NEW
:::

 Core
  - Handle the particle.tbl file for Mokka

Version v1r16p3
---------------

NEW
:::

 Workflow
  - Catch the luminosity generated by whizard for a job, and pass it to the workflow_commons definition

Version v1r16p2
---------------

BUGFIX
::::::

 Core
  - dirac-ilc-add-software

Version v1r16p1
---------------

NEW
:::

 Core
  - PrepareTomatoSalad: prepare the xml file for running tomato

CHANGE
::::::

 Workflow
  - MarlinAnalysis can be subclassed easily: TomatoAnalysis is a subclass

Version v1r15p7
---------------

NEW
:::

 Core
  - CheckXMLValidity utility to check at submission time the validity of the xml steering files

CHANGE
::::::

 Interfaces
  - Use new CheckXMLValidity utility for Marlin and LCSIM

Version v1r15p6
---------------

NEW
:::

 Interfaces
  - Switch to ignore application errors, use setIgnoreApplicationErrors() method of ILCJob to enable
  - validate input xml files during submission, catches most typos.

CHANGE
::::::

 Workflow
  - allow for user defined LesHouches file if whizard.

Version v1r15p5
---------------

CHANGE
::::::

 Core
  - Processlist is now passed as inputsandbox, so if downloading fails the first time, the job gets rescheduled

BUGFIX
::::::

 Interfaces
  - Production API: do not look for detector model if the data type is gen
 Workflow
  - SLICAnalysis: outputslcio -> outputFile

Version v1r15p4
---------------

NEW
:::

 Workflow
  - Registration of production files ancestors

Version v1r15p3
---------------

NEW
:::

 Interfaces
  - Add MCGeneration as a possible Production type

CHANGE
::::::

 Workflow
  - Added memory requirement for java in LCSIM

BUGFIX
::::::

 Core
  - With new Script interface, our scripts would not work. Made ilc-proxy-init deprecated, use proxy-init instead
  - Overlay input for LCSIM did not work (created exception)

Version v1r15p2
---------------

BUGFIX
::::::

 Workflow
  - bad workflow tag

Version v1r15p1
---------------

BUGFIX
::::::

 Workflow
  - bad workflow tag

Version v1r15p0
---------------

CHANGE: move to DIRAC v5r12p7



NEW
:::

 Core
  - Utility to obtain a prod proxy if needed, useful in prod submission scripts
 Interfaces
  - support for Tomato, check collections, lcio concat: currently in test phase
 Workflow
  - Support for overlay in LCSIM

CHANGE
::::::

 Interfaces
  - Modified scripts for sid jobs
 Workflow
  - Moved many parameters from many sub classes to mother class (ModuleBase): easier maintenance

Version v1r14p0
---------------

NEW
:::

 Interfaces
  - SID production submission scripts
  - SID chain job submission scripts, and directory containing necessary files

CHANGE
::::::

 Core
  - software addition uses Request object for replication.

BUGFIX
::::::

 Core
  - now remove system libs from all application on site. In the future, should remove them at tar ball creation time
 Workflow
  - Pass basename of xml file in LCSIM instead of parameter value

Version v1r13p3
---------------

BUGFIX
::::::

 Core
  - Gear file can also be a text in the xml parameters, not only a value

Version v1r13p2
---------------

NEW
:::

 Core
  - Added utilities for overlay input
 Interfaces
  - interface for overlay
 Workflow
  - Module for Overlay Input

BUGFIX
::::::

 Workflow
  - fix import location in LCSIMAnalysis

Version v1r13p1
---------------

BUGFIX
::::::

 Workflow
  - fix LD_LIBRARY_PATH for whizard

Version v1r13p0
---------------

NEW
:::

 Core
  - Utility to remove the libc provided in the software packages
 Interfaces
  - Script to submit productions in slic context

CHANGE
::::::

 Workflow
  - All worflow modules check that log file is present

Version v1r12p1
---------------

BUGFIX
::::::

 Workflow
  - bug fix in MokkaAnalysis

Version v1r12p0
---------------

NEW
:::

 Core
  - Now Mokka uses random seed for every job. Users can set their own seed.

Version v1r11p2
---------------

BUGFIX
::::::

 Workflow
  - take new interface of writestdhep into account

Version v1r11p1
---------------

BUGFIX
::::::

 Core
  - Bug in CombimedSoftware installation
 Interfaces
  - Several errors remained in PostGenSel module

Version v1r11p0
---------------

NEW
:::

 Core
  - added script to obtain list of available software: no need to use web page
 Interfaces
  - added PostGenSel step to allow "generator level" cuts

Version v1r10p7
---------------

CHANGE
::::::

 Core
  - All applications are also replicated to IN2P3-SRM
 Interfaces
  - jobindex in whizard can be anything
 Workflow
  - in whizard, when PYSTOP was called, application was still OK, now not anymore

BUGFIX
::::::

 Interfaces
  - XML file for LCSIM is now a parameter in the Production API

Version v1r10p6
---------------

BUGFIX
::::::

 Core
  - TARSoft was failing installation of lcio

Version v1r10p5
---------------

NEW
:::

 Core
  - LCIO specific install: environment vars are set

CHANGE
::::::

 Interfaces
  - Allowed models in Whizard for susy are slsqhh and chne

Version v1r10p4
---------------

NEW
:::

 Interfaces
  - allow choice of SUSY model in whizard

Version v1r10p3
---------------

CHANGE
::::::

 Core
  - added beam_ercoil and keep_initials as parameters

Version v1r10p2
---------------

BUGFIX
::::::

 Workflow
  - Registration of file in FC failed because FC changed

Version v1r10p1
---------------

BUGFIX
::::::

 Core
  - PrepareOptionsFile had a bug in Preparation of whizard.in

Version v1r10p0
---------------

NEW
:::

 Interfaces
  - Whizard step in DIRAC
  - SLIC Pandora step is in ProductionAPI
 Workflow
  - WhizardAnalysis module
  - FailoverRequest module: publish requests and update file status in transformation system

CHANGE
::::::

 Core
  - Whizard default .in file is now whizard.template.in, and is templated
  - Propagate the number of events and luminosity through productions
 Interfaces
  - Production and user job API takes parameters for whizard, to fill in the template
  - complete LCSIM step in production API: input and output are treated properly
  - Production details are available from web interface
 Workflow
  - UserLFN now uses current credentials to guess the VO: suitable for ILC and CALICE run

Version v1r9p0
--------------

NEW
:::

 Core
  - add resolveOFnames to change output files in production context
  - script/dirac-ilc-add-whizard: define in DIRAC a new whizard version
 Interfaces
  - Add possibility to get a file using its SRM path FIXME: startFrom in mokka is 0 by default instead of 1.
  - SLICPandora step definition
 Workflow
  - GetSRMFile module: used to get a file given its SRM path. Useful to get a file that is not registered in the DIRAC FC.
  - RegisterOutputData: set the metadata flags for production data
  - SLICPandora Module

CHANGE
::::::

 Core
  - check that application software is not empty after untarring
 Interfaces
  - allow arguments in ApplicationScript. To be used for pyroot scripts
  - add IS_PROD to workflow parameters, for Production API only
 Workflow
  - handle production context properly: input and output file names depend on prod ID and job ID
  - check that applications are actually there before running, and if not return an error.

Version v1r7p1
--------------

CHANGE
::::::

 Core
  - add comments in created steering and xml TODO: idem for SLIC and LCIM FIXME: replace rstrip by replace in TARSoft.py
 Interfaces
  - Marlin does not need to be specified the inputslcio list, as it is taken from inputdata if mokka step is not run before
  - overload setBannedSites

Version v1r7p0
--------------

CHANGE
::::::

 Core
  - Reshuffle CombinedSoftwareInstallation so that we use the SharedArea
  - TARSoft: don't redownload the applications if they are already there. Had to do some tricks to manage slic folder name TODO: what about LCSIM
  - in TARSoft, use ReplicaManager if url does not start with http://
  - better check in SQLWrapper that TMP dir is properly created. Also do proper remove of TMP dir, whatever happened to the socket.
  - better handling of SQLWrapper errors
  - Add modules needed by UserJobFinalization
  - adapt ProdutionData to ILC needs, basically removing everything
  - To be able to use InputData, need to import InputDataResolution.
  - dirac-ilc-add-sofware.py: now add to TarBallURL location the tar ball
  - update detectOS after discussion with Hubert, comment out slc4 binary support
 Interfaces
  - In presubmissionchecks, check that outputpath, if used, does not contain /../, /./, or //, and does not end with /.
  - All applications now call the UserJobFinalization module, and setOutputData is ILC specific.
  - Check that outputdata and outputsandbox do not contain the same things and output data does not allow wildcard FIXME: checks where not done properly, all things were not checked FIXME: add TotalSteps in setROOT
  - allow to use LFNs for steering and xml files for Mokka and Marlin
 Workflow
  - handle return value of SQLWrapper in MokkaWrapper
  - check if input slcio is present for Marlin before running
  - add UserJobFinalization module, taken from LHCb
  - prepare for using InputData: find out where the files are on the fly and pass the full path to PrepareOptionsfiles

Version v1r6p2
--------------

Version v1r6p1
--------------

Version v1r6p0
--------------

NEW
:::

 Core
  - dirac-ilc-add-software, utility to add software in CS

CHANGE
::::::

 Interfaces
  - use elif statements
 Workflow
  - handle end of file reached in Mokka, avoid job declared as failed.
  - in Marlin if nb of events to process is not specified, use -1 i.e. all events.

Version v1r5p0
--------------

CHANGE
::::::

 Core
  - Take into account dependencies in installation phase.
  - Set convention that folder containing application is same as tar ball name minus .tar.gz and .tgz
 Workflow
  - Get base folder  name based on CS content, allows for multiple version of the same software to run FIXME: Running marlin: duplicated processors were not properly removed from MARLIN_DLL.

Version v1r4p0
--------------

NEW
:::

 Interfaces
  - add DiracILC with specification of preSubmissionChecks
 DataManagementSystem
  - add DataManagementSystem, for dirac-dms-gridify-castor-file script

CHANGE
::::::

 Core
  - add in PrepareOptionsFiles the relevant methods for SLIC and LCSIM FIXME: fixes to the methods for Mokka and Marlin.
 Interfaces
  - add the relevant bits of code for the definition of SLIC and LCSIM jobs
  - add the possibility to run on mac files in mokka
 Workflow
  - add relevant workflow for SLIC and LCSIM

Version v1r3p0
--------------

CHANGE
::::::

 Core
  - add ilc-install.sh script FIXME: Fix PrepareOptions such that the parsing of options is done properly
 Interfaces
  - in ILCJob, possibility to run Mokka and Marlin in one job

Version v1r2p0
--------------

CHANGE
::::::

 Core
  - rewrite of SQLwrapper

Version v1r1p0
--------------

CHANGE
::::::

 Core
  - start working on InputDataResolution
 ConfigurationSystem
  - adapt UsersAndGroups to LCD : comment references to LFC
 Interfaces
  - finish dev of LCDJob

BUGFIX
::::::

 Workflow
  - Fix several bugs

Version v1r0p0
--------------

NEW: first release



NEW
:::

 Core
  - first import
 ConfigurationSystem
  - first import
 Interfaces
  - first import
 Workflow
  - first import

